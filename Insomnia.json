{"_type":"export","__export_format":4,"__export_date":"2021-04-25T04:39:43.093Z","__export_source":"insomnia.desktop.app:v2021.2.2","resources":[{"_id":"req_623e4062a44b4807ba541fe9ace5e40a","parentId":"fld_1912a87b691c4d2c9e0f1ed24f7310e5","modified":1619324743816,"created":1619294301331,"url":"{{ _.base_url }}/message/{{ _.user_id }}","name":"Get User Messages","description":"","method":"GET","body":{},"parameters":[],"headers":[],"authentication":{},"metaSortKey":-1618468289386.25,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"fld_1912a87b691c4d2c9e0f1ed24f7310e5","parentId":"wrk_96ceee25461049d8b85e5a2154aea07a","modified":1619323062035,"created":1619323062035,"name":"TestSuit","description":"","environment":{},"environmentPropertyOrder":null,"metaSortKey":-1619323062035,"_type":"request_group"},{"_id":"wrk_96ceee25461049d8b85e5a2154aea07a","parentId":null,"modified":1619048454318,"created":1618955400119,"name":"NLW#5","description":"API developed during NLW#5 with typescript, typeorm and sockets.","scope":"design","_type":"workspace"},{"_id":"req_5571bd4f6d094168a419c6b7707edff9","parentId":"fld_1912a87b691c4d2c9e0f1ed24f7310e5","modified":1619324755388,"created":1619293096332,"url":"{{ _.base_url }}/message","name":"Message","description":"","method":"POST","body":{"mimeType":"application/json","text":"{\n\t\"user_id\":\"{{ _.user_id }}\",\n\t\"text\":\" Este Ã© um teste de mensagem\"\n\t\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json","id":"pair_5a5249d636924795baac8c4650b70b24"}],"authentication":{},"metaSortKey":-1618468289336.25,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_20a77d4f557942fe910009a036241f28","parentId":"fld_1912a87b691c4d2c9e0f1ed24f7310e5","modified":1619325064602,"created":1619288712597,"url":"{{ _.base_url }}/user","name":"User","description":"","method":"POST","body":{"mimeType":"application/json","text":"{\n\t\"email\":\"testes@cordeiro.dev\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json","id":"pair_5a5249d636924795baac8c4650b70b24"}],"authentication":{},"metaSortKey":-1618468289286.25,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_a7bcd379291f436e9aaacf004d8e0865","parentId":"fld_1912a87b691c4d2c9e0f1ed24f7310e5","modified":1619325468084,"created":1618969164112,"url":"{{ _.base_url }}/settings","name":"CreateSettings","description":"","method":"POST","body":{"mimeType":"application/json","text":"{\n\t\"chat\":true,\n\t\"username\":\"teste\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json","id":"pair_5a5249d636924795baac8c4650b70b24"}],"authentication":{},"metaSortKey":-1618468289261.25,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_d1f71553f5c9402ab2ce71c5116cea7d","parentId":"fld_1912a87b691c4d2c9e0f1ed24f7310e5","modified":1619323679519,"created":1619323107019,"url":"{{ _.base_url }}/settings/{{ _.settings_chat }}","name":"GetSettings","description":"","method":"GET","body":{},"parameters":[],"headers":[],"authentication":{},"metaSortKey":-1618468289248.75,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_6c99ec478da445d38807abc03f010e16","parentId":"fld_1912a87b691c4d2c9e0f1ed24f7310e5","modified":1619323962198,"created":1619307226644,"url":"{{ _.base_url }}/settings/{{ _.settings_chat }}","name":"Update chat","description":"","method":"PUT","body":{"mimeType":"application/json","text":"{\n\t\"chat\":false\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json","id":"pair_5a5249d636924795baac8c4650b70b24"}],"authentication":{},"metaSortKey":-1618468289236.25,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_wrk_96ceee25461049d8b85e5a2154aea07aa6f01c7f","parentId":"fld_wrk_96ceee25461049d8b85e5a2154aea07a12dea96f","modified":1619320504965,"created":1619320504965,"url":"{{ base_url }}/user","name":"Create a user","description":"","method":"POST","body":{},"parameters":[],"headers":[],"authentication":{},"metaSortKey":-1619320504966,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"fld_wrk_96ceee25461049d8b85e5a2154aea07a12dea96f","parentId":"wrk_96ceee25461049d8b85e5a2154aea07a","modified":1619288459642,"created":1619288459642,"name":"user","description":"Requests for chat functionality","environment":{},"environmentPropertyOrder":null,"metaSortKey":-1619288459642,"_type":"request_group"},{"_id":"req_wrk_96ceee25461049d8b85e5a2154aea07abfc61195","parentId":"fld_wrk_96ceee25461049d8b85e5a2154aea07a7ecde348","modified":1619288699717,"created":1619288459639,"url":"{{ base_url }}/settings","name":"Create a Chat settings","description":"","method":"POST","body":{"mimeType":"application/json","text":"{\n\t\"chat\": true,\n\t\"username\": \"batsy\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json","id":"pair_fbf563fa7a5741cc84f7b92718f2de88"}],"authentication":{},"metaSortKey":-1619288459639,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"fld_wrk_96ceee25461049d8b85e5a2154aea07a7ecde348","parentId":"wrk_96ceee25461049d8b85e5a2154aea07a","modified":1618955668477,"created":1618955668477,"name":"chat","description":"Requests for chat functionality","environment":{},"environmentPropertyOrder":null,"metaSortKey":-1618955668477,"_type":"request_group"},{"_id":"req_414920f3a7c8433481b1ef4ac01f2317","parentId":"wrk_96ceee25461049d8b85e5a2154aea07a","modified":1619320447990,"created":1618956308657,"url":"{{ _.base_url }}/","name":"Validate server","description":"","method":"GET","body":{},"parameters":[],"headers":[],"authentication":{},"metaSortKey":-1618711978856.625,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"env_5ea99cef60dcc9153c851b395c83d59cacee386a","parentId":"wrk_96ceee25461049d8b85e5a2154aea07a","modified":1618955400821,"created":1618955400821,"name":"Base Environment","data":{"base_url":"{{ scheme }}://{{ host }}{{ base_path }}"},"dataPropertyOrder":null,"color":null,"isPrivate":false,"metaSortKey":1618955400821,"_type":"environment"},{"_id":"jar_5ea99cef60dcc9153c851b395c83d59cacee386a","parentId":"wrk_96ceee25461049d8b85e5a2154aea07a","modified":1618955400826,"created":1618955400826,"name":"Default Jar","cookies":[],"_type":"cookie_jar"},{"_id":"spc_cf0b3c9c91834ac4ac64b33325ded40d","parentId":"wrk_96ceee25461049d8b85e5a2154aea07a","modified":1619325200652,"created":1618955400138,"fileName":"NLW#5","contents":"{\n    \"openapi\": \"3.0.0\",\n    \"info\": {\n        \"title\": \"NLW#5\",\n        \"description\": \"Chat using sockets\",\n        \"version\": \"1.0\",\n        \"contact\": {\n            \"email\": \"rodrigomendoncca@gmail.com\"\n        }\n    },\n    \"tags\": [\n        {\n            \"name\": \"Session\",\n            \"description\": \"Requests about session initialize end terminating\"\n        },\n        {\n            \"name\": \"chat\",\n            \"description\": \"Requests for chat functionality\"\n        },\n        {\n            \"name\": \"user\",\n            \"description\": \"Requests for chat functionality\"\n        }\n    ],\n    \"servers\": [\n        {\n            \"url\": \"http://rodchat.herokuapp.com/\",\n            \"description\": \"Production server\"\n        },\n        {\n            \"url\": \"http://localhost:3333/\",\n            \"description\": \"Development server\"\n        }\n    ],\n    \"paths\": {\n        \"/settings\": {\n            \"post\": {\n                \"summary\": \"Create a Chat settings\",\n                \"tags\": [\n                    \"chat\"\n                ],\n                \"parameters\": [\n                  {\n                    \"name\": \"username\",\n                    \"in\": \"body\",\n                    \"description\": \"The chat name\",\n                    \"required\": true,\n                    \"example\": {\n                      \"username\": \"SomeChat\"\n                    },\n                    \"style\": \"simple\"\n                  },\n                  {\n                    \"name\": \"chat\",\n                    \"in\": \"body\",\n                    \"description\": \"a boolean defining the chat properties. `DEFAULT: true`\",\n                    \"required\": true,\n                    \"example\": {\n                      \"chat\": true\n                    },\n                    \"schema\": {\n                      \"type\": \"boolean\",\n                      \"items\": {\n                        \"format\": \"boolean\"\n                      }                      \n                    },\n                    \"style\": \"simple\"\n                  },\n                ],\n                \n            }\n        },\n        \"/user\": {\n          \"post\": {\n          \"tags\": [\n            \"user\"\n          ],\n          \"summary\": \"Create a user\"\n          }\n        }\n    },\n    \"components\": {\n        \"schemas\": {\n            \"userToken\": {\n                \"type\": \"string\",\n                \"description\": \"The User jwt token\",\n                \"example\": {\n                    \"User-Token\": \"lno7nlpds3imacrqhshpunumm0\"\n                },\n                \"properties\": {\n                    \"session_token\": {\n                        \"type\": \"string\",\n                        \"description\": \"The user token for authorizing theuse of the API\"\n                    }\n                }\n            }\n        }\n    }\n    \n}","contentType":"yaml","_type":"api_spec"},{"_id":"uts_0ed7701bf090484ea942bda0eae823a1","parentId":"wrk_96ceee25461049d8b85e5a2154aea07a","modified":1619324636559,"created":1619320565476,"name":"API tests","_type":"unit_test_suite"},{"_id":"env_env_5ea99cef60dcc9153c851b395c83d59cacee386a_sub","parentId":"env_5ea99cef60dcc9153c851b395c83d59cacee386a","modified":1618955884153,"created":1618955668497,"name":"OpenAPI env","data":{"scheme":"http","base_path":"","host":"rodchat.herokuapp.com"},"dataPropertyOrder":null,"color":"#11ee1f","isPrivate":false,"metaSortKey":1618955668497,"_type":"environment"},{"_id":"env_cd072fccf2a4480981a174edce6f6793","parentId":"env_5ea99cef60dcc9153c851b395c83d59cacee386a","modified":1619325414768,"created":1618955721362,"name":"DEV","data":{"base_url":"http://localhost:3333","settings_chat":"{% response 'body', 'req_a7bcd379291f436e9aaacf004d8e0865', 'b64::JC51c2VybmFtZQ==::46b', _.user_id, 60 %}","user_id":"{% response 'body', 'req_20a77d4f557942fe910009a036241f28', 'b64::JC5pZA==::46b', 'always', 60 %}"},"dataPropertyOrder":{"&":["base_url","settings_chat","user_id"]},"color":"#a824e0","isPrivate":false,"metaSortKey":1618955721362,"_type":"environment"},{"_id":"ut_56ecd0db44cc4a3695302353bae36ed4","parentId":"uts_0ed7701bf090484ea942bda0eae823a1","modified":1619323189036,"created":1619320630658,"requestId":"req_20a77d4f557942fe910009a036241f28","name":"Create user","code":"const response = await insomnia.send();\nconst body = JSON.parse(response.data);\n\nexpect(response.status).to.equal(200);\nexpect(body).to.have.property(\"id\");\nexpect(body).to.have.property(\"email\");\nexpect(body).to.have.property(\"created_at\");\nexpect(body.created_at).match(/(\\d{4})-(\\d){02}-(\\d){02}T(\\d){02}:(\\d){02}:(\\d){02}.(\\d){03}Z/gm)\n","_type":"unit_test"},{"_id":"ut_8d8f3f7092ac49d7995f9100a510cb46","parentId":"uts_0ed7701bf090484ea942bda0eae823a1","modified":1619323239884,"created":1619323157331,"requestId":"req_a7bcd379291f436e9aaacf004d8e0865","name":"create chat setting","code":"const response1 = await insomnia.send();\nconst body = JSON.parse(response1.data);\n\nexpect(response1.status).to.equal(200);\nexpect(body).to.have.property(\"id\");\nexpect(body).to.have.property(\"created_at\");\nexpect(body.created_at).match(/(\\d{4})-(\\d){02}-(\\d){02}T(\\d){02}:(\\d){02}:(\\d){02}.(\\d){03}Z/gm)\n","_type":"unit_test"},{"_id":"ut_07c7521bbcd247a29cf9c21fd0fafdaa","parentId":"uts_0ed7701bf090484ea942bda0eae823a1","modified":1619324020317,"created":1619323246208,"requestId":"req_a7bcd379291f436e9aaacf004d8e0865","name":"Not be able to create a chat with an existing name","code":"const response1 = await insomnia.send();\nexpect(response1.status).to.equal(400);\n\nconst body = JSON.parse(response1.data);\nexpect(body.message).to.be.equal(\"User already exists\")","_type":"unit_test"},{"_id":"ut_f932c61d5ac74d028a1fc6fdc5a2000b","parentId":"uts_0ed7701bf090484ea942bda0eae823a1","modified":1619325552884,"created":1619323368122,"requestId":"req_d1f71553f5c9402ab2ce71c5116cea7d","name":"Get chat settings and update it","code":"const response1 = await insomnia.send();\nconst body = JSON.parse(response1.data);\n\nexpect(response1.status).to.equal(200);\nexpect(body).to.have.property(\"id\");\nexpect(body).to.have.property(\"chat\");\nexpect(body.chat).to.be.a(\"boolean\");\n\nexpect(body).to.have.property(\"created_at\");\nexpect(body.created_at).match(/(\\d{4})-(\\d){02}-(\\d){02}T(\\d){02}:(\\d){02}:(\\d){02}.(\\d){03}Z/gm)\nexpect(body).to.have.property(\"updated_at\");\nexpect(body.updated_at).match(/(\\d{4})-(\\d){02}-(\\d){02}T(\\d){02}:(\\d){02}:(\\d){02}.(\\d){03}Z/gm)\n\nconst chat = body.chat;\n\nconst response2 = await insomnia.send('req_6c99ec478da445d38807abc03f010e16');\n\nconst response3 = await insomnia.send();\nconst data = JSON.parse(response3.data);\n\nexpect(data.chat).to.not.equal(chat);","_type":"unit_test"},{"_id":"ut_ba2b4d99e6bf426bab025312e45a2489","parentId":"uts_0ed7701bf090484ea942bda0eae823a1","modified":1619324590223,"created":1619324039201,"requestId":"req_20a77d4f557942fe910009a036241f28","name":"Return user data if it already exists","code":"const response = await insomnia.send();\nconst body = JSON.parse(response.data);\nconst {id,created_at} = body\n\nconsole.log({id,created_at})\nexpect(response.status).to.equal(200);\nexpect(JSON.parse(response.data)).to.have.property(\"id\");\nexpect(created_at).match(/(\\d{4})-(\\d){02}-(\\d){02}T(\\d){02}:(\\d){02}:(\\d){02}.(\\d){03}Z/gm)\n\nconst response1 = await insomnia.send('req_20a77d4f557942fe910009a036241f28');\nconst body2 = JSON.parse(response.data);\nconst id2 = body2.id\nconst created_at2 = body2.created_at\n\nexpect(created_at).to.be.equal(created_at2);\nexpect(id).to.be.equal(id2)","_type":"unit_test"},{"_id":"ut_f5a0a45802b5444ea1b9234cdd5c3698","parentId":"uts_0ed7701bf090484ea942bda0eae823a1","modified":1619324847118,"created":1619324773103,"requestId":"req_5571bd4f6d094168a419c6b7707edff9","name":"Create a message","code":"const response1 = await insomnia.send();\nexpect(response1.status).to.equal(200);\n\nconst body = JSON.parse(response1.data);\nconst {id,created_at} = body\n\nexpect(created_at).match(/(\\d{4})-(\\d){02}-(\\d){02}T(\\d){02}:(\\d){02}:(\\d){02}.(\\d){03}Z/gm)\n","_type":"unit_test"},{"_id":"ut_973201ef03d940c8ada63fef8a51b656","parentId":"uts_0ed7701bf090484ea942bda0eae823a1","modified":1619325029348,"created":1619324886765,"requestId":"req_623e4062a44b4807ba541fe9ace5e40a","name":"Get users messages","code":"const response1 = await insomnia.send();\nexpect(response1.status).to.equal(200);\nconst body = JSON.parse(response1.data);\nexpect(body).to.be.an(\"array\");","_type":"unit_test"}]}